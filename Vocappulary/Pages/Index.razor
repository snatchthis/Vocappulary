@page "/"
@using Vocappulary.Persistence.Services
@using Vocappulary.Persistence.Data

@inject LearnItemRepository Repo

<h1>Hello, world!</h1>

Welcome to your new app.


    <div class="container">
        <div class="form-group">
            <label for="phrase">Phrase:</label>
            <input type="text" class="form-control" id="phrase" value="@phrase" />
        </div>
        <br />
        <div class="form-group">
            <label for="translation">Translation:</label>
            <input type="text" class="form-control" id="translation" value="@translation" />
        </div>

        <br />
        <button class="btn btn-primary" type="submit" @onclick="Save">Save</button>

        <br />

        <div class="form-group">
            <label>Learn items:</label>
            <table class="table table-striped">
                <tbody>
                    @foreach (var entry in items)
                    {
                        <tr>
                            <td>@entry.Id</td>
                            <td>@entry.Phrase</td>
                            <td>@entry.Translation</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>


@code
{

    List<LearnItem> items = new List<LearnItem>();

    string phrase = string.Empty;
    string translation = string.Empty;

    private async Task Save()
    {
        LearnItem LearnEntry = new LearnItem();
        LearnEntry.Phrase = phrase;
        LearnEntry.Translation = translation;

        await Repo.SaveAsync(LearnEntry);

        items = await Repo.GetAllAsync();
    }
    //LearnItemRepository Repo;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        items = await Repo.GetAllAsync();
    }
 }